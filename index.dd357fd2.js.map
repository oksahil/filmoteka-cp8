{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,qCCAO,IAAMC,EAAa,SAACC,GACvB,IACI,IAAMC,EAASC,aAAaC,QAAQH,GACpC,OAAQI,KAAKC,MAAMJ,SAAWK,C,CAChC,MAAOC,GACLC,QAAQC,IAAI,QAASF,E,GDG7BC,QAAQC,IAAIC,EAAAC,MACZD,EAAAC,KAAKC,KAAKC,iBAAiB,SAI3B,SAA8BC,GAC1BN,QAAQO,IAAID,EAAEE,OAAOC,QAAQ,kBAAkBC,YAK/CC,EAAiBL,EAAEE,OAAOC,QAAQ,kBAAkBC,WACpDV,QAAQC,IAAIU,GACZ,IAAMC,EAAgBN,EAAEE,OAAOC,QAAQ,cAAcI,GACrDC,KAEA,EAAAC,EAAAC,eAAcJ,GAAgBK,KAAKC,GAAcC,MAAMC,E,IAd3DlB,EAAAC,KAAKkB,cAAchB,iBAAiB,QAASS,GAE7C,IAAIH,EAAiB,GAerB,SAASO,EAAaI,GExBM,IAAAC,EAAiFC,EAA/EC,EAAeC,EAAaC,EAAWC,EAAWC,EAAOC,EAASC,EFyB5F/B,QAAQC,IAAIqB,EAAKU,MAGjB9B,EAAAC,KAAK8B,SAASC,WE5BUX,EF4BeD,EAAKU,KE5B6DR,EF4BxDb,EE5BvBc,EAAcF,EAAdE,eAAeC,EAAYH,EAAZG,aAAaC,EAAUJ,EAAVI,WAAWC,EAAUL,EAAVK,WAAWC,EAAMN,EAANM,OAAOC,EAAQP,EAARO,SAASC,EAAWR,EAAXQ,YAC/F,wGAOgCI,OALoB,OAAhBJ,EAAqBP,EAJ3C,mCAImEO,EAAY,kGASOI,OAJpEV,EAAe,+OAIyFU,OAApCT,EAAaU,QAAQ,GAAG,cAGvDD,OAHmER,EAAW,6KAMlEQ,OAHZP,EAAW,6LAMXO,OAHYV,EAAe,wKAO7DU,OAJkCN,EAAOQ,KAAI,SAAAC,G,OAAMA,EAAKC,I,IAAMC,KAAK,MAAM,0HAIhEL,OAATL,EAAS,oTFKtBW,SAASC,cAAc,oBAiB/BrC,iBAAiB,SAfF,WACtBL,QAAQC,IAAI,SACZ,IACM0C,EAAepD,EAAW,WAChCS,QAAQC,IAAI0C,GACRA,GACUC,EAAAvD,EAAA,CAAGsD,GAEjB,IACME,EAAetD,EAAW,SAC5BoD,GACUC,EAAAvD,EAAA,CAAGwD,E,IAMrBC,OAAOzC,iBAAiB,UAAW0C,GACnC7C,EAAAC,KAAK6C,MAAM3C,iBAAiB,QAAS4C,E,CAEzC,SAAS7B,EAAc8B,GACnBlD,QAAQC,IAAIiD,GAGZJ,OAAOzC,iBAAiB,UAAW0C,GACnC7C,EAAAC,KAAK6C,MAAM3C,iBAAiB,QAAS4C,E,CAGzC,SAASnC,IACLZ,EAAAC,KAAK6C,MAAMG,UAAUC,OAAO,Y,CAMhC,SAASL,EAAgBzC,GACN,WAAXA,EAAE+C,OAINvC,IACAwC,I,CAEJ,SAASL,EAAyB3C,GAG1BA,EAAEiD,gBAAkBjD,EAAEE,SAC1BM,IACAwC,I,CAEJ,SAASA,IACLR,OAAOU,oBAAoB,UAAWT,GACtC7C,EAAAC,KAAK6C,MAAMQ,oBAAoB,QAASP,E","sources":["src/js/modal-info-film.js","src/js/localStorage.js","src/js/card-templete.js"],"sourcesContent":["import { refs } from '/src/index.js';\nimport { fetchFilmInfo } from \"/src/js/fetch-film-info\";\nimport { cardTemplate } from \"/src/js/card-templete\";\nimport { fetchFilmPopularity } from \"/src/js/fetch-film-popularity\";\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\n\n\n\nconsole.log(refs);\nrefs.list.addEventListener('click', onCardClickOpenModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\nlet currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n    console.dir(e.target.closest('.film-item img').currentSrc);\n    // console.log(e.target.closest('.film-item'));\n\n    \n\n    currentPictSrc = e.target.closest('.film-item img').currentSrc;\n    console.log(currentPictSrc);\n    const filmTemplateId =e.target.closest('.film-item').id;\n    toggleModal();\n\n    fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n};\n\nfunction respFilmInfo(resp) {\n    console.log(resp.data);\n    // console.log(resp.data.popularity);\n\n    refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n    const addWatched = document.querySelector('.add-watched-btn');\n\n    const onWatchedModalBtn = () => {\n        console.log('hello');\n        let watchArr = [];\n        const watchArrJson = getLocalSt('watched');\n        console.log(watchArrJson);\n        if (watchArrJson) {\n          watchArr = [...watchArrJson];\n        }\n        let queueArr = [];\n        const queueArrJson = getLocalSt('queue');\n        if (watchArrJson) {\n          queueArr = [...queueArrJson];\n        }\n    }\n\n    addWatched.addEventListener('click', onWatchedModalBtn)\n\n    window.addEventListener('keydown', onEscCloseModal);\n    refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\nfunction errorFilmInfo(er) {\n    console.log(er);\n    // fetchFilmPopularity();\n    // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n    window.addEventListener('keydown', onEscCloseModal);\n    refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\n\nfunction toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n};\n\n\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n    if (e.code !== 'Escape') {\n        return;\n    }\n\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction onOutsideClickCloseModal(e) {\n    // console.log(e.currentTarget);\n    // console.log(e.target);\n    if (e.currentTarget !== e.target) return;\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction removeAddEventlisteners() {\n    window.removeEventListener('keydown', onEscCloseModal);\n    refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n};\n ","export const getLocalSt = (key) => {\n    try {\n        const gotten = localStorage.getItem(key);\n        return (JSON.parse(gotten) || undefined);\n    } catch (error) {\n        console.log(\"Error\", error);\n    }\n}\nexport const setLocalSt = (key, value) => {\n  try {\n      const stringer = JSON.stringify(value);\n      localStorage.setItem(key, setten);\n    \n  } catch (error) {\n    console.log('Error', error);\n  }\n};\nexport const remLocalSt = (key) => {\n  try {\n    return localStorage.removeItem(key);\n  } catch (error) {\n    console.log('Error', error);\n  }\n};\n","// import { rendserIds } from '/src/index';\n\nconst imgUrl = \"https://image.tmdb.org/t/p/w500/\";\nexport const cardTemplate = ({original_title,vote_average,vote_count,popularity,genres,overview,poster_path},currentPictSrc) =>\n `<li class=\"card-item list\">\n    <div class=\"picture_container\">\n        <img class=\"film-img\" src=\"${poster_path === null?currentPictSrc:imgUrl + poster_path}\">\n    </div>\n\n    <div class=\"modal-textcontainer\">\n    \n        <h2 class=\"film-title\">${original_title}</h2>\n\n        <ul class=\"info-film list\">\n            <li class=\"info_film_left\"><p class=\"text-discription\">Vote / Votes</p></li>\n            <li class=\"info_film_right\"><p class=\"text-discription\"><span class=\"vote-highlighted\">${vote_average.toFixed(1)}</span> / ${vote_count}</p></li>\n\n            <li class=\"info_film_left\"><p class=\"text-discription\">Popularity</p></li>\n            <li class=\"info_film_right\"><p class=\"text-discription\">${popularity}</p></li>\n\n            <li class=\"info_film_left\"><p class=\"text-discription\">Original Title</p></li>\n            <li class=\"info_film_right\"><p class=\"text-discription to-upercase\">${original_title}</p></li>\n\n            <li class=\"info_film_left\"><p class=\"text-discription\">Genre</p></li>\n            <li class=\"info_film_right\"><p class=\"text-discription\">${genres.map(genr=>genr.name).join(', ')}</p></li>\n        </ul>\n\n        <h3 class=\"modal-about to-upercase\">About</h3>\n        <p class=\"modal-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal-btn-list\">\n            \n            <button class=\"add-watched-btn \"watched-btn btn-text-library btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;"],"names":["$8nrFW","parcelRequire","$0aa9cd13c14a6e1e$export$ed76abafcb8229b0","key","gotten","localStorage","getItem","JSON","parse","undefined","error","console","log","$fSCrk","refs","list","addEventListener","e","dir","target","closest","currentSrc","$15143f83a0ddf37f$var$currentPictSrc","filmTemplateId","id","$15143f83a0ddf37f$var$toggleModal","$lGS20","fetchFilmInfo","then","$15143f83a0ddf37f$var$respFilmInfo","catch","$15143f83a0ddf37f$var$errorFilmInfo","closeModalBtn","resp","param","currentPictSrc","original_title","vote_average","vote_count","popularity","genres","overview","poster_path","data","cardList","innerHTML","concat","toFixed","map","genr","name","join","document","querySelector","watchArrJson","$parcel$interopDefault","queueArrJson","window","$15143f83a0ddf37f$var$onEscCloseModal","modal","$15143f83a0ddf37f$var$onOutsideClickCloseModal","er","classList","toggle","code","$15143f83a0ddf37f$var$removeAddEventlisteners","currentTarget","removeEventListener"],"version":3,"file":"index.dd357fd2.js.map"}