{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-4a47438119077b90.js","src/js/modal-info-film.js","node_modules/@parcel/runtime-js/lib/runtime-209a66d263b2288c.js","src/js/card-templete.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bhLpe\\\":\\\"index.cb7debf1.js\\\",\\\"dJC96\\\":\\\"BOX.7c8e27d0.jpg\\\",\\\"5UbS1\\\":\\\"index.425b7750.css\\\"}\"));","import { refs } from '/src/index.js';\nimport { fetchFilmInfo } from \"/src/js/fetch-film-info\";\nimport { cardTemplate } from \"/src/js/card-templete\";\nimport { fetchFilmPopularity } from \"/src/js/fetch-film-popularity\";\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\nimport Notiflix from 'notiflix';\n// import { add } from 'lodash';\n\n\nconsole.log(refs);\nrefs.list.addEventListener('click', onCardClickOpenModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n    console.log(e.target.closest('.film-item'));\n\n    // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n    const filmTemplateId =e.target.closest('.film-item').id;\n    toggleModal();\n\n    fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n};\n\nfunction respFilmInfo(resp) {\n  console.log(resp.data);\n\n  refs.cardList.innerHTML = cardTemplate(resp.data);\n  // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n  //Declaration----------------\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n  let stringedWatchArr;\n  let stringedQueueArr;\n\n  //Checks-------------------------\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, []);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, []);\n  }\n\n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = 'Remove from watched';\n    addWatched.classList.add('active');\n  }\n  if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n    addQueue.textContent = 'Remove from queue';\n    addQueue.classList.add('active');\n  }\n\n  //textdelay-----------------------------\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  async function textWatchDelayPre() {\n    setTimeout(() => {\n      addWatched.textContent = 'Add to watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelayPre() {\n    setTimeout(() => {\n      addQueue.textContent = 'Add to queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n\n  //Buttons Functionality-----------------------------\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addWatched.classList.contains('active')) {\n      console.log(data.id);\n      let index = watchArr.indexOf(data.id);\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.splice(index, 1);\n      stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Removed from watched';\n      addWatched.disabled = true;\n      textWatchDelayPre();\n      return;\n    } else {\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n      stringedWatchArr = setLocalSt(WATCHED_KEY, watchArr);\n\n      console.log(watchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addQueue.classList.contains('active')) {\n      console.log(data.id);\n      queueArr = [];\n      queueArr.push(...getLocalSt(WATCHED_KEY));\n\n      queueArr.filter(obj => obj.poster_path === data.poster_path);\n      console.log(queueArr);\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Removed from queue';\n      addQueue.disabled = true;\n      textQueueDelayPre();\n    } else {\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n      stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\nfunction errorFilmInfo(er) {\n    console.log(er);\n    // fetchFilmPopularity();\n    // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n    window.addEventListener('keydown', onEscCloseModal);\n    refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\n\nfunction toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n    refs.modalBody.classList.toggle('no-scroll');\n};\n\n\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n    if (e.code !== 'Escape') {\n        return;\n    }\n\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction onOutsideClickCloseModal(e) {\n    // console.log(e.currentTarget);\n    // console.log(e.target);\n    if (e.currentTarget !== e.target) return;\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction removeAddEventlisteners() {\n    window.removeEventListener('keydown', onEscCloseModal);\n    refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n};\n ","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dJC96\")).toString();","// import { rendserIds } from '/src/index';\n\nimport  imgTemplate  from \"/src/images/BOX.jpg\";\n\nconst imgUrl = \"https://image.tmdb.org/t/p/w500/\";\nexport const cardTemplate = ({\n  original_title = 'no data',\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview = 'no data',\n  poster_path,\n}) =>\n  `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" loading=\"lazy\"\n         src=\"${\n          poster_path === null ? '/src/images/BOX.jpg' : imgUrl + poster_path\n        }\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${\n              genres.length === 0\n                ? 'no data'\n                : genres.map(genr => genr.name).join(', ')\n            }</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;"],"names":["parcelRequire","register","JSON","parse","$2Fivl","URL","resolve","import","meta","url","toString","$3b7a0b2bf3290fd5$export$f3d44414f0a0d0b1","original_title","vote_average","vote_count","popularity","genres","overview","poster_path","toFixed","length","map","genr","name","join","$26aff1fab1158a5e$var$respFilmInfo","resp","console","log","data","refs","cardList","innerHTML","WATCHED_KEY","QUEUE_KEY","addQueue","document","querySelector","addWatched","watchArr","watchObj","queueArr","queueObj","stringedWatchArr","stringedQueueArr1","$31u3U","getLocalSt","setLocalSt","find","obj","id","textContent","classList","add","addEventListener","e","preventDefault","contains","index","indexOf","push","splice","stringify","localStorage","setItem","$parcel$interopDefault","$eWCmQ","Notify","failure","remove","disabled","async","setTimeout","textWatchDelayPre","textWatchDelay","filter","stringedQueueArr","textQueueDelayPre","textQueueDelay","window","$26aff1fab1158a5e$var$onEscCloseModal","modal","$26aff1fab1158a5e$var$onOutsideClickCloseModal","$26aff1fab1158a5e$var$errorFilmInfo","er","$26aff1fab1158a5e$var$toggleModal","toggle","modalBody","code","$26aff1fab1158a5e$var$removeAddEventlisteners","currentTarget","target","removeEventListener","list","closest","filmTemplateId","$7JaeA","fetchFilmInfo","then","catch","closeModalBtn"],"version":3,"file":"index.cb7debf1.js.map"}