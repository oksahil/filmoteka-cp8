{"mappings":"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","sources":["src/js/modal-info-film.js","src/js/localStorage.js","src/js/card-templete.js"],"sourcesContent":["import { refs } from '/src/index.js';\nimport { fetchFilmInfo } from \"/src/js/fetch-film-info\";\nimport { cardTemplate } from \"/src/js/card-templete\";\nimport { fetchFilmPopularity } from \"/src/js/fetch-film-popularity\";\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\nimport Notiflix from 'notiflix';\n// import { add } from 'lodash';\n// import { add } from 'lodash';\n\n\nconsole.log(refs);\nrefs.list.addEventListener('click', onCardClickOpenModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n    console.log(e.target.closest('.film-item'));\n\n    // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n    const filmTemplateId =e.target.closest('.film-item').id;\n    toggleModal();\n\n    fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n};\n\nfunction respFilmInfo(resp) {\n    console.log(resp.data);\n\n    refs.cardList.innerHTML = cardTemplate(resp.data);\n    // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, watchArr);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, queueArr);\n  }\n  \n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = \"Remove from watched\";\n    addWatched.classList.add('active');\n  }\n   if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n     addQueue.textContent = 'Remove from queue';\n     addQueue.classList.add('active');\n   }\n\n\n\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n\n    if (getLocalSt(WATCHED_KEY) === undefined) {\n      watchArr.push(watchObj);\n\n      const stringedQueueArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n\n      textWatchDelay();\n      addWatched.classList.add('active');\n    } else if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n      console.log(data.id);\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n\n      let index = watchArr.indexOf(data.id);\n      watchArr.splice(index, 1);\n\n      const stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Add to watched';\n      return;\n    } else {\n      console.log(watchArr);\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n\n      const stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (getLocalSt(QUEUE_KEY) === undefined) {\n      queueArr.push(queueObj);\n\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n\n      textQueueDelay();\n      addQueue.classList.add('active');\n    } else if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n      console.log(data.id);\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n\n      let index = queueArr.indexOf(data.id);\n      queueArr.splice(index, 1);\n\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Add to queue';\n      return;\n    } else {\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\nfunction errorFilmInfo(er) {\n    console.log(er);\n    // fetchFilmPopularity();\n    // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n    window.addEventListener('keydown', onEscCloseModal);\n    refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\n\nfunction toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n};\n\n\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n    if (e.code !== 'Escape') {\n        return;\n    }\n\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction onOutsideClickCloseModal(e) {\n    // console.log(e.currentTarget);\n    // console.log(e.target);\n    if (e.currentTarget !== e.target) return;\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction removeAddEventlisteners() {\n    window.removeEventListener('keydown', onEscCloseModal);\n    refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n};\n ","export const getLocalSt = (key) => {\n    try {\n      const gotten = localStorage.getItem(key);\n      return (JSON.parse(gotten) || undefined);\n    } catch (error) {\n        console.log(\"Error\", error);\n    }\n}\nexport const setLocalSt = (key, value) => {\n  try {\n      const setten = JSON.stringify(value);\n      localStorage.setItem(key, setten);\n    \n  } catch (error) {\n    console.log('Error', error);\n  }\n};\nexport const remLocalSt = (key) => {\n  try {\n    return localStorage.removeItem(key);\n  } catch (error) {\n    console.log('Error', error);\n  }\n};\n","// import { rendserIds } from '/src/index';\n\nconst imgUrl = \"https://image.tmdb.org/t/p/w500/\";\nexport const cardTemplate = ({\n    original_title = \"no data\",\n    vote_average,\n    vote_count,\n    popularity,\n    genres,\n    overview = \"no data\",\n    poster_path }) =>\n `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" src=\"${poster_path === null?\"/src/images/BOX.jpg\":imgUrl + poster_path}\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(1)}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${genres.length === 0?\"no data\":genres.map(genr=>genr.name).join(', ')}</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;\n\n// <img class=\"film-img\" src=\"${poster_path === null?currentPictSrc:imgUrl + poster_path}\">"],"names":["$bpxeT","parcelRequire","$0aa9cd13c14a6e1e$export$ed76abafcb8229b0","key","gotten","localStorage","getItem","JSON","parse","undefined","error","console","log","$0aa9cd13c14a6e1e$export$4f7d24935d4f5feb","value","setten","stringify","setItem","$15143f83a0ddf37f$var$respFilmInfo","resp","param","original_title","vote_average","vote_count","popularity","genres","_overview","overview","poster_path","data","$fSCrk","refs","cardList","innerHTML","_original_title","concat","toFixed","length","map","genr","name","join","WATCHED_KEY","QUEUE_KEY","addQueue","document","querySelector","addWatched","watchArr","watchObj","queueArr","queueObj","textWatchDelay","_textWatchDelay","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","setTimeout","textContent","disabled","textQueueDelay","_textQueueDelay","find","obj","id","classList","add","addEventListener","e","preventDefault","push","stringedWatchArr","_watchArr","$8nrFW","index","indexOf","splice","_$stringedWatchArr","$iU1Pc","Notify","failure","remove","_watchArr1","_$stringedWatchArr1","stringedQueueArr","_queueArr","stringedQueueArr1","_queueArr1","stringedQueueArr2","window","$15143f83a0ddf37f$var$onEscCloseModal","modal","$15143f83a0ddf37f$var$onOutsideClickCloseModal","$15143f83a0ddf37f$var$errorFilmInfo","er","$15143f83a0ddf37f$var$toggleModal","toggle","code","$15143f83a0ddf37f$var$removeAddEventlisteners","currentTarget","target","removeEventListener","list","closest","filmTemplateId","$lGS20","fetchFilmInfo","then","catch","closeModalBtn"],"version":3,"file":"index.31902fea.js.map"}