{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-183b105b71e71b00.js","src/js/modal-info-film.js","node_modules/@parcel/runtime-js/lib/runtime-ed6437573aa44c63.js","src/js/localStorage.js","src/js/card-templete.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hG2aI\\\":\\\"index.ebda79e2.js\\\",\\\"8nR3u\\\":\\\"BOX.7c8e27d0.jpg\\\",\\\"5UbS1\\\":\\\"index.bb890d28.css\\\"}\"));","import { refs } from '/src/index.js';\nimport { fetchFilmInfo } from \"/src/js/fetch-film-info\";\nimport { cardTemplate } from \"/src/js/card-templete\";\nimport { fetchFilmPopularity } from \"/src/js/fetch-film-popularity\";\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\nimport Notiflix from 'notiflix';\n// import { add } from 'lodash';\n\n\nconsole.log(refs);\nrefs.list.addEventListener('click', onCardClickOpenModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n    console.log(e.target.closest('.film-item'));\n\n    // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n    const filmTemplateId =e.target.closest('.film-item').id;\n    toggleModal();\n\n    fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n};\n\nfunction respFilmInfo(resp) {\n  console.log(resp.data);\n\n  refs.cardList.innerHTML = cardTemplate(resp.data);\n  // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n  //Declaration----------------\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n  let stringedWatchArr;\n  let stringedQueueArr;\n\n  //Checks-------------------------\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, []);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, []);\n  }\n\n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = 'Remove from watched';\n    addWatched.classList.add('active');\n  }\n  if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n    addQueue.textContent = 'Remove from queue';\n    addQueue.classList.add('active');\n  }\n\n  //textdelay-----------------------------\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  async function textWatchDelayPre() {\n    setTimeout(() => {\n      addWatched.textContent = 'Add to watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelayPre() {\n    setTimeout(() => {\n      addQueue.textContent = 'Add to queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n\n  //Buttons Functionality-----------------------------\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addWatched.classList.contains('active')) {\n      console.log(data.id);\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      let index = watchArr.indexOf(data.id);\n      watchArr.splice(index, 1);\n      stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Removed from watched';\n      addWatched.disabled = true;\n      textWatchDelayPre();\n      return;\n    } else {\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n      stringedWatchArr = setLocalSt(WATCHED_KEY, watchArr);\n\n      console.log(watchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addQueue.classList.contains('active')) {\n      console.log(data.id);\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      let index = queueArr.indexOf(data.id);\n      queueArr.splice(index, 1);\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Removed from queue';\n      addQueue.disabled = true;\n      textQueueDelayPre();\n    } else {\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n      stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\nfunction errorFilmInfo(er) {\n    console.log(er);\n    // fetchFilmPopularity();\n    // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n    window.addEventListener('keydown', onEscCloseModal);\n    refs.modal.addEventListener('click', onOutsideClickCloseModal);\n};\n\nfunction toggleModal() {\n    refs.modal.classList.toggle('is-hidden');\n    refs.modalBody.classList.toggle('no-scroll');\n};\n\n\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n    if (e.code !== 'Escape') {\n        return;\n    }\n\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction onOutsideClickCloseModal(e) {\n    // console.log(e.currentTarget);\n    // console.log(e.target);\n    if (e.currentTarget !== e.target) return;\n    toggleModal();\n    removeAddEventlisteners();\n};\nfunction removeAddEventlisteners() {\n    window.removeEventListener('keydown', onEscCloseModal);\n    refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n};\n ","module.exports = require('./helpers/bundle-url').getBundleURL('hG2aI') + require('./helpers/bundle-manifest').resolve(\"8nR3u\");","export const getLocalSt = (key) => {\n    try {\n        const gotten = localStorage.getItem(key);\n        return JSON.parse(gotten);\n    } catch (error) {\n        console.log(\"Error\", error);\n    }\n}\nexport const setLocalSt = (key, value) => {\n  try {\n      const setten = JSON.stringify(value);\n      return localStorage.setItem(key, setten);\n    \n  } catch (error) {\n    console.log('Error', error);\n  }\n};\nexport const remLocalSt = (key) => {\n  try {\n    return localStorage.removeItem(key);\n  } catch (error) {\n    console.log('Error', error);\n  }\n};\n","// import { rendserIds } from '/src/index';\n\nimport  imgTemplate  from \"/src/images/BOX.jpg\";\n\nconst imgUrl = \"https://image.tmdb.org/t/p/w500/\";\nexport const cardTemplate = ({\n  original_title = 'no data',\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview = 'no data',\n  poster_path,\n}) =>\n  `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" loading=\"lazy\"\n         src=\"${\n          poster_path === null ? imgTemplate : imgUrl + poster_path\n        }\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${\n              genres.length === 0\n                ? 'no data'\n                : genres.map(genr => genr.name).join(', ')\n            }</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$daf015e6cefc24b0$exports","getBundleURL","resolve","$0aa9cd13c14a6e1e$export$ed76abafcb8229b0","key","gotten","localStorage","getItem","error","console","log","$0aa9cd13c14a6e1e$export$4f7d24935d4f5feb","value","setten","stringify","setItem","$15143f83a0ddf37f$var$respFilmInfo","resp","param","original_title","vote_average","vote_count","popularity","genres","_overview","overview","poster_path","data","$fSCrk","refs","cardList","innerHTML","_original_title","concat","$parcel$interopDefault","toFixed","length","map","genr","name","join","stringedWatchArr","stringedQueueArr1","WATCHED_KEY","QUEUE_KEY","addQueue","document","querySelector","addWatched","watchArr","watchObj","queueArr","queueObj","_textWatchDelay","$2TvXO","mark","_callee","setTimeout","textContent","disabled","apply","this","arguments","_textQueueDelay","_textWatchDelayPre","_textQueueDelayPre","find","obj","id","classList","add","addEventListener","e","preventDefault","contains","_watchArr","push","$8nrFW","index","indexOf","splice","$iU1Pc","Notify","failure","remove","textWatchDelayPre","_watchArr1","textWatchDelay","_queueArr","stringedQueueArr","textQueueDelayPre","_queueArr1","textQueueDelay","window","$15143f83a0ddf37f$var$onEscCloseModal","modal","$15143f83a0ddf37f$var$onOutsideClickCloseModal","$15143f83a0ddf37f$var$errorFilmInfo","er","$15143f83a0ddf37f$var$toggleModal","toggle","modalBody","code","$15143f83a0ddf37f$var$removeAddEventlisteners","currentTarget","target","removeEventListener","list","closest","filmTemplateId","$lGS20","fetchFilmInfo","then","catch","closeModalBtn"],"version":3,"file":"index.ebda79e2.js.map"}