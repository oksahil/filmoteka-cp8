{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-97c16ccfb3f40225.js","src/js/modal-library.js","node_modules/@parcel/runtime-js/lib/runtime-1ab4973e1b423d4e.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jTXyS\\\":\\\"library.122dfe6b.js\\\",\\\"8nR3u\\\":\\\"BOX.7c8e27d0.jpg\\\",\\\"85d9N\\\":\\\"index.63bf67bb.js\\\"}\"));","\n// import { fetchFilmInfo } from '/src/js/fetch-film-info';\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\nimport imgTemplate from '/src/images/BOX.jpg';\nimport Notiflix from 'notiflix';\n\nconst listModal = document.querySelector('.film-list');\nconst closeModal = document.querySelector('[data-modal-close]');\nconst modalLib = document.querySelector('[data-modal]');\nconst modalBodyLib = document.querySelector('body');\nconst cardListLib = document.querySelector('.card-list');\n\nlistModal.addEventListener('click', onCardClickOpenModal);\ncloseModal.addEventListener('click', toggleModal);\n\n// import { rendserIds } from '/src/index';\n\nconst imgUrl = 'https://image.tmdb.org/t/p/w500/';\n\nexport const cardTemplated = ({\n  original_title = 'no data',\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview = 'no data',\n  poster_path,\n}) =>\n  `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" loading=\"lazy\"\n         src=\"${poster_path === null ? imgTemplate : imgUrl + poster_path}\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${\n              genres.length === 0\n                ? 'no data'\n                : genres.map(genr => genr.name).join(', ')\n            }</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n  console.log(e.target.closest('.film-item'));\n\n  // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n  const filmTemplateId = e.target.closest('.film-item').id;\n  toggleModal();\n\n  fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n}\n\nfunction respFilmInfo(resp) {\n  console.log(resp.data);\n\n  refs.cardList.innerHTML = cardTemplated(resp.data);\n  // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n  //Declaration----------------\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n  let stringedWatchArr;\n  let stringedQueueArr;\n\n  //Checks-------------------------\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, []);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, []);\n  }\n\n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = 'Remove from watched';\n    addWatched.classList.add('active');\n  }\n  if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n    addQueue.textContent = 'Remove from queue';\n    addQueue.classList.add('active');\n  }\n\n  //textdelay-----------------------------\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  async function textWatchDelayPre() {\n    setTimeout(() => {\n      addWatched.textContent = 'Add to watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelayPre() {\n    setTimeout(() => {\n      addQueue.textContent = 'Add to queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n\n  //Buttons Functionality-----------------------------\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addWatched.classList.contains('active')) {\n      console.log(data.id);\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      let index = watchArr.indexOf(data.id);\n      watchArr.splice(index, 1);\n      stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Removed from watched';\n      addWatched.disabled = true;\n      textWatchDelayPre();\n      return;\n    } else {\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n      stringedWatchArr = setLocalSt(WATCHED_KEY, watchArr);\n\n      console.log(watchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addQueue.classList.contains('active')) {\n      console.log(data.id);\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      let index = queueArr.indexOf(data.id);\n      queueArr.splice(index, 1);\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Removed from queue';\n      addQueue.disabled = true;\n      textQueueDelayPre();\n    } else {\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n      stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\nfunction errorFilmInfo(er) {\n  console.log(er);\n  // fetchFilmPopularity();\n  // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n  refs.modalBody.classList.toggle('no-scroll');\n}\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction onOutsideClickCloseModal(e) {\n  // console.log(e.currentTarget);\n  // console.log(e.target);\n  if (e.currentTarget !== e.target) return;\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction removeAddEventlisteners() {\n  window.removeEventListener('keydown', onEscCloseModal);\n  refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('jTXyS') + require('./helpers/bundle-manifest').resolve(\"8nR3u\");"],"names":["parcelRequire","register","JSON","parse","$bpxeT","$2ab89868cf89df8c$exports","getBundleURL","resolve","$5274909fd9dfb2b1$var$listModal","document","querySelector","$5274909fd9dfb2b1$var$closeModal","addEventListener","e","console","log","target","closest","filmTemplateId","id","$5274909fd9dfb2b1$var$toggleModal","fetchFilmInfo","then","$5274909fd9dfb2b1$var$respFilmInfo","catch","$5274909fd9dfb2b1$var$errorFilmInfo","resp","param","original_title","vote_average","vote_count","popularity","genres","_overview","overview","poster_path","data","refs","cardList","innerHTML","_original_title","concat","$parcel$interopDefault","toFixed","length","map","genr","name","join","stringedWatchArr","stringedQueueArr1","WATCHED_KEY","QUEUE_KEY","addQueue","addWatched","watchArr","watchObj","queueArr","queueObj","_textWatchDelay","$2TvXO","mark","_callee","setTimeout","textContent","disabled","apply","this","arguments","_textQueueDelay","_textWatchDelayPre","_textQueueDelayPre","$UL92Z","getLocalSt","setLocalSt","find","obj","classList","add","preventDefault","contains","_watchArr","push","$8nrFW","index","indexOf","splice","stringify","localStorage","setItem","$iU1Pc","Notify","failure","remove","textWatchDelayPre","_watchArr1","textWatchDelay","_queueArr","stringedQueueArr","textQueueDelayPre","_queueArr1","textQueueDelay","window","$5274909fd9dfb2b1$var$onEscCloseModal","modal","$5274909fd9dfb2b1$var$onOutsideClickCloseModal","er","toggle","modalBody","code","$5274909fd9dfb2b1$var$removeAddEventlisteners","currentTarget","removeEventListener"],"version":3,"file":"library.122dfe6b.js.map"}