{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-ae299df0209d194c.js","src/js/modal-library.js","node_modules/@parcel/runtime-js/lib/runtime-209a66d263b2288c.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"g2IXO\\\":\\\"library.76f64ca5.js\\\",\\\"dJC96\\\":\\\"BOX.7c8e27d0.jpg\\\"}\"));","\n// import { fetchFilmInfo } from '/src/js/fetch-film-info';\nimport { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\nimport imgTemplate from '/src/images/BOX.jpg';\nimport Notiflix from 'notiflix';\n\nconst listModal = document.querySelector('.film-list');\nconst closeModal = document.querySelector('[data-modal-close]');\nconst modalLib = document.querySelector('[data-modal]');\nconst modalBodyLib = document.querySelector('body');\nconst cardListLib = document.querySelector('.card-list');\n\nlistModal.addEventListener('click', onCardClickOpenModal);\ncloseModal.addEventListener('click', toggleModal);\n\n// import { rendserIds } from '/src/index';\n\nconst imgUrl = 'https://image.tmdb.org/t/p/w500/';\n\nexport const cardTemplated = ({\n  original_title = 'no data',\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview = 'no data',\n  poster_path,\n}) =>\n  `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" loading=\"lazy\"\n         src=\"${poster_path === null ? imgTemplate : imgUrl + poster_path}\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${\n              genres.length === 0\n                ? 'no data'\n                : genres.map(genr => genr.name).join(', ')\n            }</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n  console.log(e.target.closest('.film-item'));\n\n  // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n  const filmTemplateId = e.target.closest('.film-item').id;\n  toggleModal();\n\n  fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n}\n\nfunction respFilmInfo(resp) {\n  console.log(resp.data);\n\n  refs.cardList.innerHTML = cardTemplated(resp.data);\n  // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n  //Declaration----------------\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n  let stringedWatchArr;\n  let stringedQueueArr;\n\n  //Checks-------------------------\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, []);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, []);\n  }\n\n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = 'Remove from watched';\n    addWatched.classList.add('active');\n  }\n  if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n    addQueue.textContent = 'Remove from queue';\n    addQueue.classList.add('active');\n  }\n\n  //textdelay-----------------------------\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  async function textWatchDelayPre() {\n    setTimeout(() => {\n      addWatched.textContent = 'Add to watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelayPre() {\n    setTimeout(() => {\n      addQueue.textContent = 'Add to queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n\n  //Buttons Functionality-----------------------------\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addWatched.classList.contains('active')) {\n      console.log(data.id);\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      let index = watchArr.indexOf(data.id);\n      watchArr.splice(index, 1);\n      stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Removed from watched';\n      addWatched.disabled = true;\n      textWatchDelayPre();\n      return;\n    } else {\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n      stringedWatchArr = setLocalSt(WATCHED_KEY, watchArr);\n\n      console.log(watchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addQueue.classList.contains('active')) {\n      console.log(data.id);\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      let index = queueArr.indexOf(data.id);\n      queueArr.splice(index, 1);\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Removed from queue';\n      addQueue.disabled = true;\n      textQueueDelayPre();\n    } else {\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n      stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\nfunction errorFilmInfo(er) {\n  console.log(er);\n  // fetchFilmPopularity();\n  // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n  refs.modalBody.classList.toggle('no-scroll');\n}\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction onOutsideClickCloseModal(e) {\n  // console.log(e.currentTarget);\n  // console.log(e.target);\n  if (e.currentTarget !== e.target) return;\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction removeAddEventlisteners() {\n  window.removeEventListener('keydown', onEscCloseModal);\n  refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dJC96\")).toString();"],"names":["parcelRequire","register","JSON","parse","$31u3U","$38c35a87f6a0dd1b$exports","URL","resolve","import","meta","url","toString","$2631b5b1e00936b8$var$listModal","document","querySelector","$2631b5b1e00936b8$var$closeModal","addEventListener","e","console","log","target","closest","filmTemplateId","id","$2631b5b1e00936b8$var$toggleModal","fetchFilmInfo","then","$2631b5b1e00936b8$var$respFilmInfo","catch","$2631b5b1e00936b8$var$errorFilmInfo","resp","data","refs","cardList","innerHTML","original_title","vote_average","vote_count","popularity","genres","overview","poster_path","$parcel$interopDefault","toFixed","length","map","genr","name","join","$2631b5b1e00936b8$export$57cbc82265d222ac","WATCHED_KEY","QUEUE_KEY","addQueue","addWatched","watchArr","watchObj","queueArr","queueObj","stringedWatchArr","stringedQueueArr1","getLocalSt","setLocalSt","find","obj","textContent","classList","add","preventDefault","contains","push","index","indexOf","splice","stringify","localStorage","setItem","$eWCmQ","Notify","failure","remove","disabled","async","setTimeout","textWatchDelayPre","textWatchDelay","stringedQueueArr","textQueueDelayPre","textQueueDelay","window","$2631b5b1e00936b8$var$onEscCloseModal","modal","$2631b5b1e00936b8$var$onOutsideClickCloseModal","er","toggle","modalBody","code","$2631b5b1e00936b8$var$removeAddEventlisteners","currentTarget","removeEventListener"],"version":3,"file":"library.76f64ca5.js.map"}