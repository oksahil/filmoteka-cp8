{"mappings":"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","sources":["src/js/modal-library.js"],"sourcesContent":["// import { refs } from '/src/index.js';\n// import { fetchFilmInfo } from '/src/js/fetch-film-info';\n// import { cardTemplate } from '/src/js/card-templete';\n// import { fetchFilmPopularity } from '/src/js/fetch-film-popularity';\n// import { getLocalSt, setLocalSt, remLocalSt } from './localStorage';\n// import imgTemplate from '/src/images/BOX.jpg';\n// import Notiflix from 'notiflix';\n// // import { add } from 'lodash';\n\nconsole.log(refs);\nrefs.list.addEventListener('click', onCardClickOpenModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\n// import { rendserIds } from '/src/index';\n\nconst imgUrl = 'https://image.tmdb.org/t/p/w500/';\n\nexport const cardTemplated = ({\n  original_title = 'no data',\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  overview = 'no data',\n  poster_path,\n}) =>\n  `<li class=\"modal_card_container list\">\n    <div class=\"modal_pict_container\">\n        <img class=\"film-img\" loading=\"lazy\"\n         src=\"${poster_path === null ? imgTemplate : imgUrl + poster_path}\">\n    </div>\n\n    <div class=\"modal_text_container\">\n    \n        <h2 class=\"film_title\">${original_title}</h2>\n\n        <ul class=\"modal_filminfo list\">\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Vote / Votes</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\"><span class=\"vote_highlighted\">${vote_average.toFixed(\n              1\n            )}</span> / ${vote_count}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Popularity</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${popularity}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Original Title</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data to-upercase\">${original_title}</p></li>\n\n            <li class=\"filminfo_left\"><p class=\"modal_filminfo-data\">Genre</p></li>\n            <li class=\"filminfo_right\"><p class=\"modal_filminfo-data\">${\n              genres.length === 0\n                ? 'no data'\n                : genres.map(genr => genr.name).join(', ')\n            }</p></li>\n        </ul>\n\n        <h3 class=\"modal_text_container-about to-upercase\">About</h3>\n        <p class=\"modal_text_container-overwiew\">${overview}</p>\n       \n\n        <div class=\"modal_btn_container\">\n            \n            <button class=\"add-watched-btn btn\" type=\"button\">ADD TO WATCHED</button>\n            <button class=\"add-queue-btn btn\" type=\"button\">ADD TO QUEUE</button> \n        </div>\n    </div>\n</li>`;\n\n// let currentPictSrc = \"\";\nfunction onCardClickOpenModal(e) {\n  console.log(e.target.closest('.film-item'));\n\n  // currentPictSrc = e.target.closest('.film-item img').currentSrc;\n  const filmTemplateId = e.target.closest('.film-item').id;\n  toggleModal();\n\n  fetchFilmInfo(filmTemplateId).then(respFilmInfo).catch(errorFilmInfo);\n}\n\nfunction respFilmInfo(resp) {\n  console.log(resp.data);\n\n  refs.cardList.innerHTML = cardTemplated(resp.data);\n  // refs.cardList.innerHTML = cardTemplate(resp.data,currentPictSrc);\n\n  //-------------------------------------WATCHED-QUEUE----------------------------------------\n  //Declaration----------------\n  const WATCHED_KEY = 'watched';\n  const QUEUE_KEY = 'queue';\n  const { data } = resp;\n  const addQueue = document.querySelector('.add-queue-btn');\n  const addWatched = document.querySelector('.add-watched-btn');\n\n  let watchArr = [];\n  const watchObj = data;\n  let queueArr = [];\n  const queueObj = data;\n  let stringedWatchArr;\n  let stringedQueueArr;\n\n  //Checks-------------------------\n\n  if (!getLocalSt(WATCHED_KEY)) {\n    setLocalSt(WATCHED_KEY, []);\n  }\n  if (!getLocalSt(QUEUE_KEY)) {\n    setLocalSt(QUEUE_KEY, []);\n  }\n\n  if (getLocalSt(WATCHED_KEY).find(obj => obj.id === data.id)) {\n    addWatched.textContent = 'Remove from watched';\n    addWatched.classList.add('active');\n  }\n  if (getLocalSt(QUEUE_KEY).find(obj => obj.id === data.id)) {\n    addQueue.textContent = 'Remove from queue';\n    addQueue.classList.add('active');\n  }\n\n  //textdelay-----------------------------\n  async function textWatchDelay() {\n    setTimeout(() => {\n      addWatched.textContent = 'Remove from watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelay() {\n    setTimeout(() => {\n      addQueue.textContent = 'Remove from queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n  async function textWatchDelayPre() {\n    setTimeout(() => {\n      addWatched.textContent = 'Add to watched';\n      addWatched.disabled = false;\n    }, 1000);\n  }\n  async function textQueueDelayPre() {\n    setTimeout(() => {\n      addQueue.textContent = 'Add to queue';\n      addQueue.disabled = false;\n    }, 1000);\n  }\n\n  //Buttons Functionality-----------------------------\n  const onWatchedModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addWatched.classList.contains('active')) {\n      console.log(data.id);\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      let index = watchArr.indexOf(data.id);\n      watchArr.splice(index, 1);\n      stringedWatchArr = JSON.stringify(watchArr);\n      localStorage.setItem(WATCHED_KEY, stringedWatchArr);\n      console.log(stringedWatchArr);\n      Notiflix.Notify.failure('Removed from watched');\n      addWatched.classList.remove('active');\n      addWatched.textContent = 'Removed from watched';\n      addWatched.disabled = true;\n      textWatchDelayPre();\n      return;\n    } else {\n      watchArr = [];\n      watchArr.push(...getLocalSt(WATCHED_KEY));\n      watchArr.push(watchObj);\n      stringedWatchArr = setLocalSt(WATCHED_KEY, watchArr);\n\n      console.log(watchArr);\n\n      addWatched.textContent = 'Added from watched';\n      addWatched.disabled = true;\n      textWatchDelay();\n      addWatched.classList.add('active');\n    }\n  };\n  const onQueueModalBtn = e => {\n    console.log('hello!');\n    e.preventDefault();\n\n    if (addQueue.classList.contains('active')) {\n      console.log(data.id);\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      let index = queueArr.indexOf(data.id);\n      queueArr.splice(index, 1);\n      const stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem(QUEUE_KEY, stringedQueueArr);\n      console.log(stringedQueueArr);\n      Notiflix.Notify.failure('Removed from queue');\n      addQueue.classList.remove('active');\n      addQueue.textContent = 'Removed from queue';\n      addQueue.disabled = true;\n      textQueueDelayPre();\n    } else {\n      queueArr = [];\n      queueArr.push(...getLocalSt(QUEUE_KEY));\n      queueArr.push(queueObj);\n      stringedQueueArr = JSON.stringify(queueArr);\n      localStorage.setItem('queue', stringedQueueArr);\n      console.log(stringedQueueArr);\n      addQueue.textContent = 'Added from queue';\n      addQueue.disabled = true;\n      textQueueDelay();\n      addQueue.classList.add('active');\n    }\n  };\n\n  addWatched.addEventListener('click', onWatchedModalBtn);\n  addQueue.addEventListener('click', onQueueModalBtn);\n\n  //------------------------------------WATCHED-QUEUE---------------------------\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\nfunction errorFilmInfo(er) {\n  console.log(er);\n  // fetchFilmPopularity();\n  // refs.cardList.innerHTML = \"Sorry we can't load film data!\";\n  window.addEventListener('keydown', onEscCloseModal);\n  refs.modal.addEventListener('click', onOutsideClickCloseModal);\n}\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n  refs.modalBody.classList.toggle('no-scroll');\n}\n\n// ----------------- CLOSE MODAL------------------------------\nfunction onEscCloseModal(e) {\n  if (e.code !== 'Escape') {\n    return;\n  }\n\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction onOutsideClickCloseModal(e) {\n  // console.log(e.currentTarget);\n  // console.log(e.target);\n  if (e.currentTarget !== e.target) return;\n  toggleModal();\n  removeAddEventlisteners();\n}\nfunction removeAddEventlisteners() {\n  window.removeEventListener('keydown', onEscCloseModal);\n  refs.modal.removeEventListener('click', onOutsideClickCloseModal);\n}\n"],"names":["$bpxeT","parcelRequire","console","log","refs","list","addEventListener","e","target","closest","filmTemplateId","id","$5274909fd9dfb2b1$var$toggleModal","fetchFilmInfo","then","$5274909fd9dfb2b1$var$respFilmInfo","catch","$5274909fd9dfb2b1$var$errorFilmInfo","closeModalBtn","resp","param","original_title","vote_average","vote_count","popularity","genres","_overview","overview","poster_path","data","cardList","innerHTML","_original_title","concat","imgTemplate","toFixed","length","map","genr","name","join","stringedWatchArr","stringedQueueArr1","WATCHED_KEY","QUEUE_KEY","addQueue","document","querySelector","addWatched","watchArr","watchObj","queueArr","queueObj","_textWatchDelay","$parcel$interopDefault","$2TvXO","mark","_callee","setTimeout","textContent","disabled","apply","this","arguments","_textQueueDelay","_textWatchDelayPre","_textQueueDelayPre","getLocalSt","setLocalSt","find","obj","classList","add","preventDefault","contains","_watchArr","push","$8nrFW","index","indexOf","splice","JSON","stringify","localStorage","setItem","Notiflix","Notify","failure","remove","textWatchDelayPre","_watchArr1","textWatchDelay","_queueArr","stringedQueueArr","textQueueDelayPre","_queueArr1","textQueueDelay","window","$5274909fd9dfb2b1$var$onEscCloseModal","modal","$5274909fd9dfb2b1$var$onOutsideClickCloseModal","er","toggle","modalBody","code","$5274909fd9dfb2b1$var$removeAddEventlisteners","currentTarget","removeEventListener"],"version":3,"file":"library.69218aa9.js.map"}